<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Object Storage Example</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
</head>



<body>

  

    <button onclick="newObj()">asdasd</button>
    <script>


         window.onload = function () {
            // Load data from local storage when the page loads
            for (var i = 0; i < localStorage.length; i++) {
                var key = localStorage.key(i);
                if (key.startsWith("item_")) {
                    var objectString = localStorage.getItem(key);
                    var retrievedObject = JSON.parse(objectString);
                    objectsArray.push(retrievedObject);
                }
            }
            displayTop();
        }

     
     window.onload = function () {
            // Load data from local storage when the page loads
            for (var i = 0; i < objectsArray.length; i++) {
            var key = "item_" + i;
            var objectString = localStorage.getItem(key);


            var tableHTML =
            '<div class="table-responsive"><table class="table table-bordered"><thead><tr><th>ID</th><th>First Name</th><th>Last Name</th><th>Age</th><th>Salary</th><th>Action</th></tr></thead><tbody>';



          
            }
    }
         
        var objectsArray = [
            {
                id: 1,
                firstName: "RRR",
                lastName: "Ver",
                age: 28,
                salary: 11,
                action: ` <button type="button">Add</button> <button type="button">Remove</button>`,
            },
        ];


        function newObj() {

            let id = prompt(`Enter id:`);
            let firstName = prompt(`Enter firstname`);
            let lastName = prompt(`Enter lastname`);
            let age = prompt(`Enter age`);
            let salary = prompt(`Enter the salary `);

            let obj = {
                id: id,
                firstName: firstName,
                lastName: lastName,
                age: age,
                salary: salary
            }
            objectsArray.push(obj);
            console.log(objectsArray);
            for (let index = 0; index < objectsArray.length; index++) {

                let key = `item_` + index;
                localStorage.setItem(key, JSON.stringify(objectsArray[index]));
            }

             displayTop();

        }

        // var objectArray =
        //     objectsArray.forEach(function (object) {
        //         var key = "object_" + object.id;
        //         localStorage.setItem(key, JSON.stringify(object));
        //     });

       

                function displayTop(){

                
        for (var i = 0; i < objectsArray.length; i++) {
            var key = "item_" + i;
            var objectString = localStorage.getItem(key);

            if (objectString) {
                var retrievedObject = JSON.parse(objectString);

                tableHTML += `<tr>
                                <td>${retrievedObject.id}</td>
                                <td>${retrievedObject.firstName}</td>
                                <td>${retrievedObject.lastName}</td>
                                <td>${retrievedObject.age}</td>
                                <td>${retrievedObject.salary}</td>
                                <td>${retrievedObject.action}</td>
                              </tr>`;
            } else {
                console.log("No data found for key: " + key);
            }
        }

        tableHTML += "</tbody></table></div>";

        var containerDiv = document.createElement("div");
        containerDiv.innerHTML = tableHTML;

        document.body.appendChild(containerDiv);

                }
    </script>

    <!-- Bootstrap JS (optional, for additional features like collapsible rows) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
</body>

</html>
